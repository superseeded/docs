---
title: "Spec alignment"
description: "Resolve raw text labels into structured biological concepts"
---

The **Alignment Engine** uses a "Growth Equivalent" logic to resolve raw text labels into structured biological concepts.

## The problem

Legacy systems rely on exact string matching. This affects the supply chain because:

* Units differ: Litres (Volume) vs. Millimeters (Diameter).
* Formats differ: "Pot", "Bag", "Tubestock", "Planter Bag".
* Abbreviations are common: "AS" (Air Slot), "RP" (Root Pruning), "XG" (Ex-Ground).

## The solution: Growth equivalents

When you send a list of strings to `/resolve/specs`, the engine maps them to a stage of maturity (0-5). This allows you to determine if two items are swappable.

### The maturity hierarchy

| Stage | Name | Examples | Substitution logic |
| --- | --- | --- | --- |
| 0 | Genetic | Seeds, Tissue Culture | Not a plant yet. |
| 1 | Propagation | Jiffy, Plugs, Cuttings | Production inputs. High transplant risk. |
| 2 | Liners | Tubes, Cell Trays, Punnets | Stackable freight. "Potting up" stock. |
| 3 | Retail | 140mm - 300mm Pots | Standard rigid containers. Pallet freight. |
| 4 | Advanced | 45L Bags, Air Pots | Landscape construction stock. |
| 5 | Mature | Ex-Ground, 100L+ | Heavy machinery required. |

## Data metadata

The API returns metadata for logistics and risk management.

### 1. Logistical data

The API flags freight constraints.

> **Scenario:** A "Standard Tube" is flagged as `is_stackable: true`. A "200mm Pot" is `is_stackable: false`.
> **Value:** Applications can calculate that shipping 1,000 tubes is less expensive than shipping 1,000 pots.

### 2. Quality and risk profiles

The API provides information on handling and perishability.

> **Scenario:** You resolve a "Bare Root" tree.
> **Response:** The API returns `transplant_shock_risk: "High"` and `seasonal_restriction: "Winter Only"`.
> **Value:** You can display a warning in your UI: "Warning: This item is perishable and only available in Winter."

## Example request

```javascript
const response = await client.post('/resolve/specs', {
  items: [
    "400mm AS",
    "20L Planter Bag"
  ]
});
```

## Example response

```json
{
  "results": [
    {
      "input_label": "400mm AS",
      "match_confidence": "Medium",
      "standard_data": {
        "id": "3.2",
        "evergreen_connect_potsize_id": [
          606,693,707,838,753,775,509,832,556,533,755,541,560,786,780,656
        ],
        "type": "Pot - Square",
        "stage_order": 3,
        "stage_name": "Retail & Small Production",
        "is_biological": true,
        "matching_strategy": "Volume/Width",
        "logistics": {
          "tier": "Pallet",
          "is_stackable": false,
          "freight_efficiency": "Medium-High"
        },
        "quality_profile": {
          "transplant_shock_risk": "Low",
          "seasonal_restriction": "None",
          "inspection_focus": "Root Circling"
        },
        "customer_note": "More volume efficient than round pots; fits tighter on pallets."
      },
      "external_ids": null
    },
    {
      "input_label": "20L Planter Bag",
      "match_confidence": "High",
      "standard_data": {
        "id": "4.2",
        "evergreen_connect_potsize_id": [
          730
        ],
        "type": "Planter Bag",
        "stage_order": 4,
        "stage_name": "Advanced Production",
        "is_biological": true,
        "matching_strategy": "Volume",
        "logistics": {
          "tier": "Pallet",
          "is_stackable": false,
          "freight_efficiency": "High"
        },
        "quality_profile": {
          "transplant_shock_risk": "Low",
          "seasonal_restriction": "None",
          "inspection_focus": "Weeds/Slugs"
        },
        "customer_note": "Cheaper equivalent to pots; bags can be squashed during transit."
      },
      "external_ids": null
    }
  ]
}
```
